CREATE TABLE USUARIO (USUARIO VARCHAR(30) NOT NULL, APELLIDOS VARCHAR(60) NOT NULL, codigo_postal INTEGER NOT NULL, CONTRASEÑA VARCHAR(30) NOT NULL, correo_electronico VARCHAR(60) NOT NULL UNIQUE, DESCRIPCION VARCHAR(500), DIRECCION VARCHAR(150) NOT NULL, DNI VARCHAR(9) NOT NULL UNIQUE, fecha_alta DATE NOT NULL, fecha_baja DATE, NOMBRE VARCHAR(30) NOT NULL, POBLACION VARCHAR(200) NOT NULL, PROVINCIA VARCHAR(30) NOT NULL, TELEFONO VARCHAR(15) NOT NULL, PRIMARY KEY (USUARIO))
CREATE TABLE PETICION (ID BIGINT NOT NULL, DESCRIPCION VARCHAR(500), numero_niños INTEGER NOT NULL, TIPO SMALLINT DEFAULT 0 NOT NULL, USUARIO_USUARIO VARCHAR(30), PRIMARY KEY (ID))
CREATE TABLE EMPLEADO (USUARIO VARCHAR(30) NOT NULL, APELLIDOS VARCHAR(60) NOT NULL, codigo_postal INTEGER, CONTRASEÑA VARCHAR(30) NOT NULL, correo_electronico VARCHAR(60) NOT NULL UNIQUE, DIRECCION VARCHAR(150) NOT NULL, DNI VARCHAR(9) NOT NULL UNIQUE, fecha_alta DATE NOT NULL, fecha_baja DATE, NOMBRE VARCHAR(30) NOT NULL, numero_empleado INTEGER NOT NULL, POBLACION VARCHAR(200) NOT NULL, PROVINCIA VARCHAR(30) NOT NULL, ROL VARCHAR(255) NOT NULL, TELEFONO VARCHAR(15) NOT NULL, PRIMARY KEY (USUARIO))
CREATE TABLE CARTA (ID BIGINT NOT NULL, ADJUNTO BLOB(2147483647), ASUNTO VARCHAR(50) NOT NULL, MENSAJE VARCHAR(1000) NOT NULL, EMPLEADO_USUARIO VARCHAR(30) NOT NULL, HISTORIAL_ID BIGINT NOT NULL, NIÑO_USUARIO VARCHAR(30) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE historial_cartas (ID BIGINT NOT NULL, ESTADO SMALLINT DEFAULT 0, fecha_envio DATE NOT NULL, USUARIO_USUARIO VARCHAR(30) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE historial_padrinos (ID BIGINT NOT NULL, DESCRIPCION VARCHAR(255), fecha_apadrinamiento DATE NOT NULL, fecha_cancelacion DATE, USUARIO_USUARIO VARCHAR(30), PRIMARY KEY (ID))
CREATE TABLE NIÑO (USUARIO VARCHAR(30) NOT NULL, APELLIDOS VARCHAR(60) NOT NULL, DIRECCION VARCHAR(150), fecha_alta DATE NOT NULL, fecha_baja DATE, fecha_nacimiento DATE NOT NULL, FOTOGRAFIA BLOB(2147483647), NOMBRE VARCHAR(30) NOT NULL, POBLACION VARCHAR(200), HISTORIAL_ID BIGINT NOT NULL, PRIMARY KEY (USUARIO))
CREATE TABLE PAQUETE (ID BIGINT NOT NULL, ADJUNTO BLOB(2147483647), DESCRIPCION VARCHAR(500) NOT NULL, DESTINO VARCHAR(100) NOT NULL, ORIGEN VARCHAR(100) NOT NULL, HISTORIAL_ID BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE historial_paquetes (ID BIGINT NOT NULL, DESCRIPCION VARCHAR(500), ESTADO SMALLINT DEFAULT 0, fecha_envio DATE NOT NULL, fecha_recepcion DATE, PRIMARY KEY (ID))
ALTER TABLE PETICION ADD CONSTRAINT PTCIONSARIOUSUARIO FOREIGN KEY (USUARIO_USUARIO) REFERENCES USUARIO (USUARIO)
ALTER TABLE CARTA ADD CONSTRAINT CARTA_NIÑO_USUARIO FOREIGN KEY (NIÑO_USUARIO) REFERENCES NIÑO (USUARIO)
ALTER TABLE CARTA ADD CONSTRAINT CARTA_HISTORIAL_ID FOREIGN KEY (HISTORIAL_ID) REFERENCES historial_cartas (ID)
ALTER TABLE CARTA ADD CONSTRAINT CRTAMPLEADOUSUARIO FOREIGN KEY (EMPLEADO_USUARIO) REFERENCES EMPLEADO (USUARIO)
ALTER TABLE historial_cartas ADD CONSTRAINT hstrlcartasSRSARIO FOREIGN KEY (USUARIO_USUARIO) REFERENCES USUARIO (USUARIO)
ALTER TABLE historial_padrinos ADD CONSTRAINT hstrlpdrinosSRSRIO FOREIGN KEY (USUARIO_USUARIO) REFERENCES USUARIO (USUARIO)
ALTER TABLE NIÑO ADD CONSTRAINT NIÑO_HISTORIAL_ID FOREIGN KEY (HISTORIAL_ID) REFERENCES historial_padrinos (ID)
ALTER TABLE PAQUETE ADD CONSTRAINT PAQUETEHISTORIALID FOREIGN KEY (HISTORIAL_ID) REFERENCES historial_paquetes (ID)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(15), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
